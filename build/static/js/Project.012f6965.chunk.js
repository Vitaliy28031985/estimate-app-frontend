"use strict";(self.webpackChunkestimate_app_frontend=self.webpackChunkestimate_app_frontend||[]).push([[962],{518:(e,t,s)=>{s.r(t),s.d(t,{default:()=>K});var i=s(689),n=s(791),a=s(420),l=s(828),c=s(147),d=s(18),r=s(728),o=s(663),u=s(85),h=(s(462),s(756)),m=s(457);const j="Select_label__9it1R",x="Select_input__mxCWQ",_="Select_button__khGe2";var p=s(329);const b=function(e){let{isShowModal:t,add:s}=e;const{data:i}=(0,m.xo)(),[a,l]=(0,n.useState)(""),[c,d]=(0,n.useState)(""),[r,o]=(0,n.useState)(""),h=e=>{const{name:t,value:s}=e.currentTarget;switch(t){case"title":l(s);break;case"unit":d(s);break;case"number":o(s);break;default:return}};return(0,p.jsxs)("form",{action:"",onSubmit:async e=>{if(e.preventDefault(),"empty"==a||""===c||""===r||""===a)return void(0,u.Am)("\u0423\u0441\u0456 \u043f\u043e\u043b\u044f \u043c\u0430\u044e\u0442\u044c \u0431\u0443\u0442\u0438 \u0437\u0430\u043f\u043e\u0432\u043d\u0435\u043d\u0456");const n=(await(null===i||void 0===i?void 0:i.filter((e=>e.title===a))))[0].price;await s({title:a,unit:c,number:Number(r),price:n}),l(""),o(""),d(""),t()},children:[(0,p.jsxs)("select",{className:x,name:"title",id:"title",onChange:h,children:[i&&(null===i||void 0===i?void 0:i.map((e=>{let{title:t,price:s}=e;return(0,p.jsx)("option",{value:t,children:t})}))),(0,p.jsx)("option",{value:"empty",selected:!0,children:"\u0412\u0438\u0431\u0435\u0440\u0438 \u0432\u0438\u0434 \u0440\u043e\u0431\u043e\u0442\u0438"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:j,children:"\u041e\u0434\u0438\u043d\u0438\u0446\u044f"}),(0,p.jsx)("input",{className:x,type:"text",value:c,name:"unit",onChange:h})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:j,children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"}),(0,p.jsx)("input",{className:x,type:"number",value:r,name:"number",onChange:h})]}),(0,p.jsx)("button",{className:_,children:"\u0414\u043e\u0434\u0430\u0442\u0438"})]})},N="Input_label__ZsiRC",v="Input_input__sWvGM",w="Input_button__vmxoZ";const C=function(e){let{isShowModal:t,add:s}=e;const[i,a]=(0,n.useState)(""),[l,c]=(0,n.useState)(""),[d,r]=(0,n.useState)(""),[o,h]=(0,n.useState)(""),m=e=>{const{name:t,value:s}=e.currentTarget;switch(t){case"title":a(s);break;case"unit":c(s);break;case"number":r(s);break;case"price":h(s);break;default:return}};return(0,p.jsxs)("form",{action:"",onSubmit:async e=>{if(e.preventDefault(),""===l||""===d||""===i||""===o)return void(0,u.Am)("\u0423\u0441\u0456 \u043f\u043e\u043b\u044f \u043c\u0430\u044e\u0442\u044c \u0431\u0443\u0442\u0438 \u0437\u0430\u043f\u043e\u0432\u043d\u0435\u043d\u0456");const n={title:i,unit:l,number:Number(d),price:Number(o)};await s({title:i,unit:l,number:Number(d),price:Number(o)}),console.log(n),a(""),r(""),c(""),t()},children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:N,children:"\u041d\u0430\u0437\u0432\u0430 \u0440\u043e\u0431\u043e\u0442\u0438"}),(0,p.jsx)("input",{className:v,name:"title",value:i,id:"title",onChange:m})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:N,children:"\u041e\u0434\u0438\u043d\u0438\u0446\u044f"}),(0,p.jsx)("input",{className:v,type:"text",value:l,name:"unit",onChange:m})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:N,children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"}),(0,p.jsx)("input",{className:v,type:"number",value:d,name:"number",onChange:m})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:N,children:"\u0426\u0456\u043d\u0430"}),(0,p.jsx)("input",{className:v,type:"number",value:o,name:"price",onChange:m})]}),(0,p.jsx)("button",{className:w,children:"\u0414\u043e\u0434\u0430\u0442\u0438"})]})},g="AddPosition_container__oleEJ",S="AddPosition_closeButton__N-8sD",f="AddPosition_positionContainer__tJs-0";const P=function(e){let{isShowModal:t,add:s}=e;const[i,a]=(0,n.useState)(!1),l=()=>{a((e=>!e))};return(0,p.jsxs)("div",{className:g,children:[(0,p.jsx)("button",{className:S,type:"button",onClick:t,children:(0,p.jsx)(h.Z,{width:"24",height:"24"})}),(0,p.jsx)(u.Ix,{draggable:!0}),i?(0,p.jsx)(C,{isShowModal:t,add:s}):(0,p.jsx)(b,{isShowModal:t,add:s}),i?(0,p.jsxs)("div",{className:f,children:[(0,p.jsx)("p",{children:"\u0423 \u0432\u0430\u0441 \u0454 \u0446\u044f \u043f\u043e\u0437\u0438\u0446\u0456\u044f \u0432 \u043f\u0440\u0430\u0439\u0441\u0456?"}),(0,p.jsx)("button",{type:"button",onClick:l,children:"\u041f\u0440\u0435\u0439\u0442\u0438 \u0449\u043e\u0431 \u0434\u043e\u0434\u0430\u0442\u0438"})]}):(0,p.jsxs)("div",{className:f,children:[(0,p.jsx)("p",{children:"\u0412\u0438 \u0445\u043e\u0447\u0438\u0442\u0435 \u0434\u043e\u0434\u0430\u0442\u0438 \u043f\u043e\u0437\u0438\u0446\u0456\u044e \u044f\u043a\u043e\u0457 \u043d\u0435\u043c\u0430\u0454 \u0432 \u043f\u0440\u0430\u0439\u0441\u0456 ?"}),(0,p.jsx)("button",{type:"button",onClick:l,children:"\u041f\u0440\u0435\u0439\u0442\u0438 \u0449\u043e\u0431 \u0434\u043e\u0434\u0430\u0442\u0438"})]})]})},y="AddEstimate_container__k+6JP",I="AddEstimate_closeButton__Np--B",k="AddEstimate_label__ZJlui",A="AddEstimate_input__7nS6M",M="AddEstimate_button__3Vjd6";const Z=function(e){let{isShowModal:t,idData:s}=e;const[i,d]=(0,n.useState)(""),[r]=(0,c.Dz)(),o=(0,a.I0)();return(0,p.jsxs)("div",{className:y,children:[(0,p.jsx)(u.Ix,{draggable:!0}),(0,p.jsx)("button",{className:I,type:"button",onClick:t,children:(0,p.jsx)(h.Z,{width:"24",height:"24"})}),(0,p.jsxs)("form",{action:"",onSubmit:async e=>{if(e.preventDefault(),!i)return void(0,u.Am)("\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c \u0443\u0441\u0456 \u043f\u043e\u043b\u044f");const n={id:s,estimates:{title:i||""}};try{await r(n),o(l.qx.util.resetApiState())}catch(a){console.error("Error adding estimate:",a)}d(""),t()},children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:k,children:"\u041d\u0430\u0439\u043c\u0435\u043d\u0443\u0432\u0430\u043d\u043d\u044f"}),(0,p.jsx)("input",{type:"text",name:"title",className:A,onChange:e=>{const{name:t,value:s}=e.currentTarget;"title"===t&&d(s)},value:i})]}),(0,p.jsx)("button",{className:M,children:"\u0414\u043e\u0434\u0430\u0442\u0438"})]})]})},E="ProjectItem_title__BJ+J4",V="ProjectItem_address__hMVGr",B="ProjectItem_titleTable__GBSny",H="ProjectItem_iksweb__lzC88",D="ProjectItem_titleRow__41Yub",R="ProjectItem_dataRow__Ouhdo",J="ProjectItem_oneRow__2dI+x",G="ProjectItem_twoRow__+M9Lk",T="ProjectItem_threeRow__MzcBV",q="ProjectItem_threeSix__Ne1NB",z="ProjectItem_total__4Q2d+",O="ProjectItem_buttonAddContainer__1XPbs",Y="ProjectItem_buttonAdd__rLN0i",F="ProjectItem_buttonAddTitle__cYbUN",L="ProjectItem_buttonDeletePosition__HOb+G";var Q=s(132);const U=function(){const[e,t]=(0,n.useState)(!1),[s,h]=(0,n.useState)(!1),[m,j]=(0,n.useState)({}),{id:x}=(0,i.UO)(),_=(0,a.I0)(),{data:b,error:N}=(0,l.ai)(x),[v]=(0,c.BP)(),[w]=(0,d.d1)(),[C]=(0,d.Vv)();let g="",S="";if(N)return(0,p.jsx)("div",{children:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u0443"});const f=async(s,i)=>{e||(g=await s,S=await i,await j({idEst:g,idPos:S})),t((e=>!e))},y=()=>{h((e=>!e))};return(0,p.jsxs)("div",{children:[(0,p.jsx)(u.Ix,{draggable:!0}),b&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:O,children:[(0,p.jsxs)("p",{className:E,children:["\u041d\u0430\u0437\u0432\u0430 \u043e\u0431'\u0454\u043a\u0442\u0443: ",b.title]}),(0,p.jsx)("button",{type:"button",className:F,onClick:y,children:(0,p.jsx)(r.Z,{width:"24",height:"24"})})]}),b.description&&(0,p.jsxs)("p",{className:V,children:["\u0410\u0434\u0440\u0435\u0441\u0430: ",b.description]}),b.estimates&&b.estimates.map((e=>(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:O,children:[(0,p.jsx)("p",{className:B,children:e.title}),(0,p.jsx)("button",{type:"button",className:F,onClick:()=>(async(e,t)=>{await v({idPro:e,idEst:t}),_(l.qx.util.resetApiState()),(0,u.Am)("\u0422\u0430\u0431\u043b\u0438\u0446\u044e \u043a\u043e\u0448\u0442\u043e\u0440\u0438\u0441\u0443 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e")})(null===b||void 0===b?void 0:b._id,null===e||void 0===e?void 0:e._id),children:(0,p.jsx)(o.Z,{width:"24",height:"24"})})]}),(0,p.jsx)("table",{className:H,children:(0,p.jsxs)("tbody",{children:[(0,p.jsxs)("tr",{className:D,children:[(0,p.jsx)("td",{className:J,children:"\u2116 \u0437/\u043f."}),(0,p.jsxs)("td",{className:G,children:["\u041d\u0430\u0437\u0432\u0430",(0,p.jsx)("button",{type:"button",onClick:()=>b&&e._id&&f(e._id,b._id),className:Y,children:(0,p.jsx)(r.Z,{width:"24",height:"24"})})]}),(0,p.jsx)("td",{className:T,children:"\u041e\u0434\u0438\u043d\u0438\u0446\u044f"}),(0,p.jsx)("td",{className:T,children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"}),(0,p.jsx)("td",{className:T,children:"\u0426\u0456\u043d\u0430 \u0432 \u0433\u0440\u043d."}),(0,p.jsx)("td",{className:q,children:"\u0421\u0443\u043c\u0430 \u0432 \u0433\u0440\u043d."})]}),e.positions&&e.positions.map(((t,s)=>{let{_id:i,id:n,title:a,unit:c,price:d,number:r,result:h}=t;return(0,p.jsxs)("tr",{className:R,children:[(0,p.jsx)("td",{className:J,children:s+1}),(0,p.jsxs)("td",{children:[(0,p.jsx)("button",{className:L,onClick:()=>(async(e,t,s)=>{await w({idPro:t,idEst:e,idPos:s}),_(l.qx.util.resetApiState()),(0,u.Am)("\u041f\u043e\u0437\u0438\u0446\u0456\u044e \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e")})(e._id,b._id,n),children:(0,p.jsx)(o.Z,{width:"24",height:"24"})}),a]}),(0,p.jsx)("td",{className:T,children:c}),(0,p.jsx)("td",{className:T,children:r}),(0,p.jsx)("td",{className:T,children:d}),(0,p.jsx)("td",{className:q,children:h})]},i)})),(0,p.jsxs)("tr",{className:"title-row",children:[(0,p.jsx)("td",{colSpan:"5",children:"\u0412\u0441\u044c\u043e\u0433\u043e:"}),(0,p.jsx)("td",{className:q,children:e.total})]})]})})]},e._id)))]}),(0,p.jsxs)("div",{className:z,children:[(0,p.jsx)("p",{children:"\u0417\u0430\u0433\u0430\u043b\u044c\u043d\u0430 \u0441\u0443\u043c\u0430: "}),b&&(0,p.jsx)("p",{children:b.total})]}),e&&(0,p.jsx)(Q.Z,{children:(0,p.jsx)(P,{isShowModal:f,add:async e=>{const t={idEst:m.idEst,idPos:m.idPos,position:e};await C(t),_(l.qx.util.resetApiState()),(0,u.Am)("\u041f\u043e\u0437\u0438\u0446\u0456\u044e \u0434\u043e\u0434\u0430\u043d\u043e")}})}),s&&(0,p.jsx)(Q.Z,{children:(0,p.jsx)(Z,{idData:x,isShowModal:y})})]})},W="Project_projectContainer__Y99VE",X="Project_titleEst__FRdC8";const K=function(){return(0,p.jsxs)("div",{className:W,children:[(0,p.jsx)("h1",{className:X,children:"\u041a\u041e\u0428\u0422\u041e\u0420\u0418\u0421"}),(0,p.jsx)(U,{})]})}},728:(e,t,s)=>{s.d(t,{Z:()=>n});var i=s(329);const n=function(e){let{width:t,height:s}=e;return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:s,viewBox:"0 0 24 24",fill:"none",children:[(0,i.jsx)("path",{d:"M12 5C15.9 5 19 8.1 19 12C19 15.9 15.9 19 12 19C8.1 19 5 15.9 5 12C5 8.1 8.1 5 12 5ZM12 4C7.6 4 4 7.6 4 12C4 16.4 7.6 20 12 20C16.4 20 20 16.4 20 12C20 7.6 16.4 4 12 4Z","fill-opacity":"0.6"}),(0,i.jsx)("path",{d:"M17 11H13V7H11V11H7V13H11V17H13V13H17V11Z","fill-opacity":"0.6"})]})}},663:(e,t,s)=>{s.d(t,{Z:()=>n});var i=s(329);const n=function(e){let{width:t,height:s}=e;return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:s,viewBox:"0 0 24 24",fill:"none",children:[(0,i.jsx)("path",{d:"M12 5C15.9 5 19 8.1 19 12C19 15.9 15.9 19 12 19C8.1 19 5 15.9 5 12C5 8.1 8.1 5 12 5ZM12 4C7.6 4 4 7.6 4 12C4 16.4 7.6 20 12 20C16.4 20 20 16.4 20 12C20 7.6 16.4 4 12 4Z"}),(0,i.jsx)("path",{d:"M7 11H17V13H7V11Z"})]})}}}]);
//# sourceMappingURL=Project.012f6965.chunk.js.map