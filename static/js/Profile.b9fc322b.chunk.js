"use strict";(self.webpackChunkestimate_app_frontend=self.webpackChunkestimate_app_frontend||[]).push([[97],{4101:(e,l,s)=>{s.r(l),s.d(l,{default:()=>B});var a=s(4420),i=s(3602);const n="ProfileInfo_infoTitle__zD8gP",t="ProfileInfo_ifoContainer__eUaP1",o="ProfileInfo_profileContainerPhoto__mzDo4",r="ProfileInfo_infoText__wG3lf",c="ProfileInfo_infoTextMins__SEgO6";var d=s(3329);const u=function(){var e,l,s;const{data:a}=(0,i.sA)();return(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:n,children:"\u041c\u043e\u044f \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f:"}),(0,d.jsxs)("div",{className:t,children:[(0,d.jsx)("div",{className:o,children:(0,d.jsx)("img",{src:"https://www.shutterstock.com/image-illustration/avatar-modern-young-guy-working-260nw-2015853839.jpg",alt:""})}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("p",{className:r,children:["\u0406\u043c'\u044f: ",(0,d.jsx)("span",{className:c,children:null===a||void 0===a||null===(e=a.user)||void 0===e?void 0:e.name})]}),(0,d.jsxs)("p",{className:r,children:["Email: ",(0,d.jsx)("span",{className:c,children:null===a||void 0===a||null===(l=a.user)||void 0===l?void 0:l.email})]}),(0,d.jsxs)("p",{className:r,children:["\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443: ",(0,d.jsx)("span",{className:c,children:null===a||void 0===a||null===(s=a.user)||void 0===s?void 0:s.phone})]})]})]})]})};var m=s(1087),h=s(2791),_=s(828),j=s(9085),x=(s(5462),s(4132));const f="ProfileProjects_projectsListContainer__+I4IK",v="ProfileProjects_listItem__-kjY1",p="ProfileProjects_projectLink__UwMKd",w="ProfileProjects_allowButton__vYXVZ";var N=s(7113);const A="Allow_container__kHES9",g="Allow_closeButton__hGACT",b="Allow_label__beG-e",P="Allow_input__ZCMol",S="Allow_button__puacB",C="Allow_formContainer__q+n9e",k="Allow_form__EDBFb";const I=function(e){let{isShowModal:l,allowFu:s,id:n}=e;const t=(0,a.I0)(),[o,r]=(0,h.useState)(""),[c,u]=(0,h.useState)(""),[m,j]=(0,h.useState)(null),[x,f]=(0,h.useState)(null),{data:v}=(0,i.zQ)(),{data:p}=(0,_.ai)(n);(0,h.useEffect)((()=>{v&&j(v)}),[v]),(0,h.useEffect)((()=>{p&&f(p)}),[p,n]);const w=null===x||void 0===x?void 0:x.allowList;let I=[];const E=()=>{for(let e=0;e<(null===w||void 0===w?void 0:w.length);e++){const l=null===m||void 0===m?void 0:m.filter((l=>{let{_id:s}=l;return s===w[e]}));l&&l.length>0&&I.push(l[0].email)}};E();const T=e=>{const{name:l,value:s}=e.currentTarget;switch(l){case"emailAllow":r(s);break;case"emailNotAllow":u(s);break;default:return}},y=async e=>{e.preventDefault();const{name:a}=e.currentTarget;"allow"===a&&(s({email:o},a),E(),t(_.qx.util.resetApiState()),r("")),"notAllow"===a&&(s({email:c},a),E(),t(_.qx.util.resetApiState()),u("")),l()};return(0,d.jsxs)("div",{className:A,children:[(0,d.jsx)("button",{className:g,type:"button",onClick:l,children:(0,d.jsx)(N.Z,{width:"24",height:"24"})}),(0,d.jsx)("div",{className:C,children:(0,d.jsxs)("form",{className:k,action:"",name:"allow",onSubmit:y,children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:b,children:"Email \u042f\u043a\u043e\u043c\u0443 \u043f\u043e\u0442\u0440\u0456\u0431\u043d\u043e \u043d\u0430\u0434\u0430\u0442\u0438 \u0434\u043e\u0437\u0432\u0456\u043b"}),(0,d.jsx)("input",{type:"email",name:"emailAllow",className:P,onChange:T,value:o})]}),(0,d.jsx)("button",{disabled:""===o,className:S,children:"\u041d\u0430\u0434\u0430\u0442\u0438 \u0434\u043e\u0437\u0432\u0456\u043b"})]})}),(0,d.jsx)("div",{className:C,children:(0,d.jsxs)("form",{className:k,action:"",name:"notAllow",onSubmit:y,children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:b,children:"Email \u0412\u0456\u0434 \u044f\u043a\u043e\u0433\u043e \u043f\u043e\u0442\u0440\u0456\u0431\u043d\u043e \u0437\u0430\u0431\u0440\u0430\u0442\u0438 \u0434\u043e\u0437\u0432\u0456\u043b"}),(0,d.jsxs)("select",{className:P,name:"emailNotAllow",id:"emailNotAllow",onChange:T,children:[null===I||void 0===I?void 0:I.map((e=>(0,d.jsx)("option",{value:e,children:e}))),(0,d.jsx)("option",{value:"empty",selected:!0,children:"\u0412\u0438\u0431\u0435\u0440\u0438 email \u0434\u043b\u044f \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f"})]})]}),(0,d.jsx)("button",{disabled:""===c,className:S,children:"\u0417\u0430\u0431\u0440\u0430\u0442\u0438 \u0434\u043e\u0437\u0432\u0456\u043b"})]})})]})};const E=function(){const{data:e}=(0,i.sA)(),[l,s]=(0,h.useState)(!1),[a,n]=(0,h.useState)(""),{data:t}=(0,_.S4)(),[o]=(0,i.JT)(),[r]=(0,i.Ci)(),[c,u]=(0,h.useState)(!1);(0,h.useEffect)((()=>{if(e){var l;const s=null===e||void 0===e||null===(l=e.user)||void 0===l?void 0:l.role;u("customer"!==s)}}),[e,c]);const N=async e=>{s((e=>!e)),await n(e)};return(0,d.jsxs)("div",{className:f,children:[(0,d.jsx)(j.Ix,{draggable:!0}),(0,d.jsx)("h4",{children:"\u0421\u043f\u0438\u0441\u043e\u043a \u043a\u043e\u0448\u0442\u043e\u0440\u0438\u0441\u0456\u0432"}),(0,d.jsx)("ul",{children:t&&t.map((e=>{let{_id:l,title:s,description:a}=e;return(0,d.jsxs)("li",{className:v,children:[(0,d.jsx)("h4",{children:s}),(0,d.jsx)("p",{children:a}),c&&(0,d.jsx)("button",{className:w,onClick:()=>N(l),children:"\u0414\u043e\u0437\u0432\u0456\u043b"}),(0,d.jsx)(m.OL,{className:p,to:"/projects/".concat(l),children:"\u0414\u0435\u0442\u0430\u043b\u044c\u043d\u0456\u0448\u0435"})]},l)}))}),l&&(0,d.jsx)(x.Z,{children:(0,d.jsx)(I,{isShowModal:N,allowFu:async(e,l)=>{if("allow"===l){const l=await o({id:a,newData:e});l.error?j.Am.error(l.error.data.message):(0,j.Am)("\u0414\u043e\u0437\u0432\u0456\u043b \u0434\u043e \u043a\u043e\u0448\u0442\u043e\u0440\u0438\u0441\u0443 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u0437 email: ".concat(e.email," \u043d\u0430\u0434\u0430\u043d\u043e"))}if("notAllow"===l){const l=await r({id:a,newData:e});l.error?j.Am.error(l.error.data.message):(0,j.Am)("\u0414\u043e\u0437\u0432\u0456\u043b \u0434\u043e \u043a\u043e\u0448\u0442\u043e\u0440\u0438\u0441\u0443 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u0437 email: ".concat(e.email,"  \u0441\u043a\u0430\u0441\u043e\u0432\u0430\u043d\u043e"))}},id:a})})]})},T="Profile_profileTitle__KsmoG",y="Profile_profileContainer__nBUTx";const D=function(){return(0,a.I0)()(i.iJ.util.resetApiState()),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:T,children:"\u041a\u0430\u0431\u0456\u043d\u0435\u0442 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430"}),(0,d.jsxs)("div",{className:y,children:[(0,d.jsx)(u,{}),(0,d.jsx)(E,{})]})]})};const B=function(){return(0,d.jsx)("div",{children:(0,d.jsx)(D,{})})}}}]);
//# sourceMappingURL=Profile.b9fc322b.chunk.js.map