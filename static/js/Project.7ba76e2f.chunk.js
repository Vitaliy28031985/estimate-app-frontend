"use strict";(self.webpackChunkestimate_app_frontend=self.webpackChunkestimate_app_frontend||[]).push([[962],{3518:(t,e,s)=>{s.r(e),s.d(e,{default:()=>st});var i=s(7689),n=s(2791),a=s(4420),l=s(6435),c=s.n(l),o=s(5834),d=s(828),r=s(5147),u=s(1018),h=s(9728),m=s(663),x=s(9085),j=(s(5462),s(7113)),_=s(2457);const p="Select_label__QMERC",v="Select_input__P2+h8",b="Select_button__6gBiO";var N=s(3329);const w=function(t){var e;let{isShowModal:s,add:i}=t;const[a,l]=(0,n.useState)(""),{data:c}=(0,_.xo)(),[o,d]=(0,n.useState)(""),[r,u]=(0,n.useState)(""),[h,m]=(0,n.useState)(""),j=a.toLowerCase(),w=null!==(e=null===c||void 0===c?void 0:c.filter((t=>t.title.toLowerCase().includes(j))))&&void 0!==e?e:[],g=t=>{const{name:e,value:s}=t.currentTarget;switch(e){case"title":d(s);break;case"unit":u(s);break;case"number":m(s);break;default:return}};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("input",{onChange:t=>l(t.target.value),value:a,type:"text",className:v,placeholder:"\u041f\u043e\u0448\u0443\u043a \u0437 \u043f\u0440\u0430\u0439\u0441\u0443"}),(0,N.jsxs)("form",{action:"",onSubmit:async t=>{if(t.preventDefault(),"empty"===o||""===r||""===h||""===o)return void(0,x.Am)("\u0423\u0441\u0456 \u043f\u043e\u043b\u044f \u043c\u0430\u044e\u0442\u044c \u0431\u0443\u0442\u0438 \u0437\u0430\u043f\u043e\u0432\u043d\u0435\u043d\u0456");const e=(await(null===c||void 0===c?void 0:c.filter((t=>t.title===o))))[0].price;await i({title:o,unit:r,number:Number(h),price:e}),d(""),m(""),u(""),s()},children:[(0,N.jsxs)("select",{className:v,name:"title",id:"title",onChange:g,children:[w&&(null===w||void 0===w?void 0:w.map((t=>{let{title:e,price:s}=t;return(0,N.jsx)("option",{value:e,children:e})}))),(0,N.jsx)("option",{value:"empty",selected:!0,children:"\u0412\u0438\u0431\u0435\u0440\u0438 \u0432\u0438\u0434 \u0440\u043e\u0431\u043e\u0442\u0438"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("p",{className:p,children:"\u041e\u0434\u0438\u043d\u0438\u0446\u044f"}),(0,N.jsx)("input",{className:v,type:"text",value:r,name:"unit",onChange:g})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("p",{className:p,children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"}),(0,N.jsx)("input",{className:v,type:"number",value:h,name:"number",onChange:g})]}),(0,N.jsx)("button",{className:b,children:"\u0414\u043e\u0434\u0430\u0442\u0438"})]})]})},g="Input_label__JCAog",C="Input_input__o1gwc",f="Input_button__USz93";const S=function(t){let{isShowModal:e,add:s}=t;const[i,a]=(0,n.useState)(""),[l,c]=(0,n.useState)(""),[o,d]=(0,n.useState)(""),[r,u]=(0,n.useState)(""),h=t=>{const{name:e,value:s}=t.currentTarget;switch(e){case"title":a(s);break;case"unit":c(s);break;case"number":d(s);break;case"price":u(s);break;default:return}};return(0,N.jsxs)("form",{action:"",onSubmit:async t=>{if(t.preventDefault(),""===l||""===o||""===i||""===r)return void(0,x.Am)("\u0423\u0441\u0456 \u043f\u043e\u043b\u044f \u043c\u0430\u044e\u0442\u044c \u0431\u0443\u0442\u0438 \u0437\u0430\u043f\u043e\u0432\u043d\u0435\u043d\u0456");const n={title:i,unit:l,number:Number(o),price:Number(r)};await s({title:i,unit:l,number:Number(o),price:Number(r)}),console.log(n),a(""),d(""),c(""),e()},children:[(0,N.jsxs)("div",{children:[(0,N.jsx)("p",{className:g,children:"\u041d\u0430\u0437\u0432\u0430 \u0440\u043e\u0431\u043e\u0442\u0438"}),(0,N.jsx)("input",{className:C,name:"title",value:i,id:"title",onChange:h})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("p",{className:g,children:"\u041e\u0434\u0438\u043d\u0438\u0446\u044f"}),(0,N.jsx)("input",{className:C,type:"text",value:l,name:"unit",onChange:h})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("p",{className:g,children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"}),(0,N.jsx)("input",{className:C,type:"number",value:o,name:"number",onChange:h})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("p",{className:g,children:"\u0426\u0456\u043d\u0430"}),(0,N.jsx)("input",{className:C,type:"number",value:r,name:"price",onChange:h})]}),(0,N.jsx)("button",{className:f,children:"\u0414\u043e\u0434\u0430\u0442\u0438"})]})},P="AddPosition_container__pO8O7",y="AddPosition_closeButton__q9-9I",I="AddPosition_positionContainer__QeSCp";const k=function(t){let{isShowModal:e,add:s}=t;const[i,a]=(0,n.useState)(!1),l=()=>{a((t=>!t))};return(0,N.jsxs)("div",{className:P,children:[(0,N.jsx)("button",{className:y,type:"button",onClick:e,children:(0,N.jsx)(j.Z,{width:"24",height:"24"})}),(0,N.jsx)(x.Ix,{draggable:!0}),i?(0,N.jsx)(S,{isShowModal:e,add:s}):(0,N.jsx)(w,{isShowModal:e,add:s}),i?(0,N.jsxs)("div",{className:I,children:[(0,N.jsx)("p",{children:"\u0423 \u0432\u0430\u0441 \u0454 \u0446\u044f \u043f\u043e\u0437\u0438\u0446\u0456\u044f \u0432 \u043f\u0440\u0430\u0439\u0441\u0456?"}),(0,N.jsx)("button",{type:"button",onClick:l,children:"\u041f\u0440\u0435\u0439\u0442\u0438 \u0449\u043e\u0431 \u0434\u043e\u0434\u0430\u0442\u0438"})]}):(0,N.jsxs)("div",{className:I,children:[(0,N.jsx)("p",{children:"\u0412\u0438 \u0445\u043e\u0447\u0438\u0442\u0435 \u0434\u043e\u0434\u0430\u0442\u0438 \u043f\u043e\u0437\u0438\u0446\u0456\u044e \u044f\u043a\u043e\u0457 \u043d\u0435\u043c\u0430\u0454 \u0432 \u043f\u0440\u0430\u0439\u0441\u0456 ?"}),(0,N.jsx)("button",{type:"button",onClick:l,children:"\u041f\u0440\u0435\u0439\u0442\u0438 \u0449\u043e\u0431 \u0434\u043e\u0434\u0430\u0442\u0438"})]})]})},A="AddEstimate_container__BE+Nb",E="AddEstimate_closeButton__KVf5C",M="AddEstimate_label__gg7QK",Z="AddEstimate_input__0Jq4c",B="AddEstimate_button__JxdUx";const D=function(t){let{isShowModal:e,idData:s}=t;const[i,l]=(0,n.useState)(""),[c]=(0,r.Dz)(),o=(0,a.I0)();return(0,N.jsxs)("div",{className:A,children:[(0,N.jsx)(x.Ix,{draggable:!0}),(0,N.jsx)("button",{className:E,type:"button",onClick:e,children:(0,N.jsx)(j.Z,{width:"24",height:"24"})}),(0,N.jsxs)("form",{action:"",onSubmit:async t=>{if(t.preventDefault(),!i)return void(0,x.Am)("\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c \u0443\u0441\u0456 \u043f\u043e\u043b\u044f");const n={id:s,estimates:{title:i||""}};try{await c(n),o(d.qx.util.resetApiState())}catch(a){console.error("Error adding estimate:",a)}l(""),e()},children:[(0,N.jsxs)("div",{children:[(0,N.jsx)("p",{className:M,children:"\u041d\u0430\u0439\u043c\u0435\u043d\u0443\u0432\u0430\u043d\u043d\u044f"}),(0,N.jsx)("input",{type:"text",name:"title",className:Z,onChange:t=>{const{name:e,value:s}=t.currentTarget;"title"===e&&l(s)},value:i})]}),(0,N.jsx)("button",{className:B,children:"\u0414\u043e\u0434\u0430\u0442\u0438"})]})]})},H="ProjectItem_title__h9Y0J",T="ProjectItem_address__6rgST",V="ProjectItem_titleTable__mdu0h",z="ProjectItem_iksweb__D1h0m",R="ProjectItem_titleRow__Syb5w",q="ProjectItem_dataRow__BQcGC",F="ProjectItem_oneRow__1YePW",L="ProjectItem_twoRow__sILs0",U="ProjectItem_threeRow__3IrUH",J="ProjectItem_threeSix__axFxv",O="ProjectItem_total__brM1k",Q="ProjectItem_buttonAddContainer__CCrUD",Y="ProjectItem_buttonAdd__XtEBi",K="ProjectItem_buttonAddTitle__hYwer",G="ProjectItem_buttonDeletePosition__FrfNT",W="ProjectItem_createPdfFileButton__ph2ll";var X=s(4132);const $=function(){const[t,e]=(0,n.useState)(!1),[s,l]=(0,n.useState)(!1),[j,_]=(0,n.useState)({}),{id:p}=(0,i.UO)(),v=(0,a.I0)(),{data:b,error:w}=(0,d.ai)(p),[g]=(0,r.BP)(),[C]=(0,u.d1)(),[f]=(0,u.Vv)();let S="",P="";if(w)return(0,N.jsx)("div",{children:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u0443"});const y=async(s,i)=>{t||(S=await s,P=await i,await _({idEst:S,idPos:P})),e((t=>!t))},I=()=>{l((t=>!t))};return c().vfs=o.I.vfs,(0,N.jsxs)("div",{children:[(0,N.jsx)(x.Ix,{draggable:!0}),(0,N.jsx)("button",{className:W,onClick:()=>{if(b){const t=[{text:"\u041d\u0430\u0437\u0432\u0430 \u043e\u0431'\u0454\u043a\u0442\u0443:          ".concat(null===b||void 0===b?void 0:b.title),fontSize:25},{text:"\u0410\u0434\u0440\u0435\u0441\u0430:                                                 ".concat(null===b||void 0===b?void 0:b.description),fontSize:14,marginTop:10}];b.estimates.forEach((e=>{var s;t.push({text:null===e||void 0===e?void 0:e.title,fontSize:16,bold:!0,marginTop:30,marginBottom:10,marginLeft:200},{table:{headerRows:1,widths:["auto","auto","auto","auto","auto","auto"],body:[["\u2116 \u0437/\u043f.","\u041d\u0430\u0437\u0432\u0430","\u041e\u0434\u0438\u043d\u0438\u0446\u044f","\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c","\u0426\u0456\u043d\u0430 \u0432 \u0433\u0440\u043d.","\u0421\u0443\u043c\u0430 \u0432 \u0433\u0440\u043d."],...(null===e||void 0===e||null===(s=e.positions)||void 0===s?void 0:s.map(((t,e)=>{let{title:s,unit:i,price:n,number:a,result:l}=t;return[e+1,s||"",i||"",a||"",n||"",l||""]})))||[],[{},{},{},{},"\u0412\u0441\u044c\u043e\u0433\u043e:",null===e||void 0===e?void 0:e.total]]},layout:"lightHorizontalLines",style:"tableExample"})})),t.push({text:"\u0417\u0430\u0433\u0430\u043b\u044c\u043d\u0430 \u0441\u0443\u043c\u0430:                            ".concat(null===b||void 0===b?void 0:b.total),fontSize:30,marginTop:30});const e={content:t,styles:{tableExample:{margin:[0,5,0,15],fontSize:12,color:"#333"}}};c().createPdf(e).download("".concat(null===b||void 0===b?void 0:b.title,".pdf"))}},children:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 PDF \u0444\u0430\u0439\u043b"}),b&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:Q,children:[(0,N.jsxs)("p",{className:H,children:["\u041d\u0430\u0437\u0432\u0430 \u043e\u0431'\u0454\u043a\u0442\u0443: ",b.title]}),(0,N.jsx)("button",{type:"button",className:K,onClick:I,children:(0,N.jsx)(h.Z,{width:"24",height:"24"})})]}),b.description&&(0,N.jsxs)("p",{className:T,children:["\u0410\u0434\u0440\u0435\u0441\u0430: ",b.description]}),b.estimates&&b.estimates.map((t=>(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{className:Q,children:[(0,N.jsx)("p",{className:V,children:t.title}),(0,N.jsx)("button",{type:"button",className:K,onClick:()=>(async(t,e)=>{await g({idPro:t,idEst:e}),v(d.qx.util.resetApiState()),(0,x.Am)("\u0422\u0430\u0431\u043b\u0438\u0446\u044e \u043a\u043e\u0448\u0442\u043e\u0440\u0438\u0441\u0443 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e")})(null===b||void 0===b?void 0:b._id,null===t||void 0===t?void 0:t._id),children:(0,N.jsx)(m.Z,{width:"24",height:"24"})})]}),(0,N.jsx)("table",{className:z,children:(0,N.jsxs)("tbody",{children:[(0,N.jsxs)("tr",{className:R,children:[(0,N.jsx)("td",{className:F,children:"\u2116 \u0437/\u043f."}),(0,N.jsxs)("td",{className:L,children:["\u041d\u0430\u0437\u0432\u0430",(0,N.jsx)("button",{type:"button",onClick:()=>b&&t._id&&y(t._id,b._id),className:Y,children:(0,N.jsx)(h.Z,{width:"24",height:"24"})})]}),(0,N.jsx)("td",{className:U,children:"\u041e\u0434\u0438\u043d\u0438\u0446\u044f"}),(0,N.jsx)("td",{className:U,children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"}),(0,N.jsx)("td",{className:U,children:"\u0426\u0456\u043d\u0430 \u0432 \u0433\u0440\u043d."}),(0,N.jsx)("td",{className:J,children:"\u0421\u0443\u043c\u0430 \u0432 \u0433\u0440\u043d."})]}),t.positions&&t.positions.map(((e,s)=>{let{_id:i,id:n,title:a,unit:l,price:c,number:o,result:r}=e;return(0,N.jsxs)("tr",{className:q,children:[(0,N.jsx)("td",{className:F,children:s+1}),(0,N.jsxs)("td",{children:[(0,N.jsx)("button",{className:G,onClick:()=>(async(t,e,s)=>{await C({idPro:e,idEst:t,idPos:s}),v(d.qx.util.resetApiState()),(0,x.Am)("\u041f\u043e\u0437\u0438\u0446\u0456\u044e \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e")})(t._id,b._id,n),children:(0,N.jsx)(m.Z,{width:"24",height:"24"})}),a]}),(0,N.jsx)("td",{className:U,children:l}),(0,N.jsx)("td",{className:U,children:o}),(0,N.jsx)("td",{className:U,children:c}),(0,N.jsx)("td",{className:J,children:r})]},i)})),(0,N.jsxs)("tr",{className:"title-row",children:[(0,N.jsx)("td",{colSpan:"5",children:"\u0412\u0441\u044c\u043e\u0433\u043e:"}),(0,N.jsx)("td",{className:J,children:t.total})]})]})})]},t._id)))]}),(0,N.jsxs)("div",{className:O,children:[(0,N.jsx)("p",{children:"\u0417\u0430\u0433\u0430\u043b\u044c\u043d\u0430 \u0441\u0443\u043c\u0430: "}),b&&(0,N.jsx)("p",{children:b.total})]}),t&&(0,N.jsx)(X.Z,{children:(0,N.jsx)(k,{isShowModal:y,add:async t=>{const e={idEst:j.idEst,idPos:j.idPos,position:t};await f(e),v(d.qx.util.resetApiState()),(0,x.Am)("\u041f\u043e\u0437\u0438\u0446\u0456\u044e \u0434\u043e\u0434\u0430\u043d\u043e")}})}),s&&(0,N.jsx)(X.Z,{children:(0,N.jsx)(D,{idData:p,isShowModal:I})})]})},tt="Project_projectContainer__1NP4c",et="Project_titleEst__bB-cB";const st=function(){return(0,N.jsxs)("div",{className:tt,children:[(0,N.jsx)("h1",{className:et,children:"\u041a\u041e\u0428\u0422\u041e\u0420\u0418\u0421"}),(0,N.jsx)($,{})]})}},9728:(t,e,s)=>{s.d(e,{Z:()=>n});var i=s(3329);const n=function(t){let{width:e,height:s}=t;return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:s,viewBox:"0 0 24 24",fill:"none",children:[(0,i.jsx)("path",{d:"M12 5C15.9 5 19 8.1 19 12C19 15.9 15.9 19 12 19C8.1 19 5 15.9 5 12C5 8.1 8.1 5 12 5ZM12 4C7.6 4 4 7.6 4 12C4 16.4 7.6 20 12 20C16.4 20 20 16.4 20 12C20 7.6 16.4 4 12 4Z","fill-opacity":"0.6"}),(0,i.jsx)("path",{d:"M17 11H13V7H11V11H7V13H11V17H13V13H17V11Z","fill-opacity":"0.6"})]})}},663:(t,e,s)=>{s.d(e,{Z:()=>n});var i=s(3329);const n=function(t){let{width:e,height:s}=t;return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:s,viewBox:"0 0 24 24",fill:"none",children:[(0,i.jsx)("path",{d:"M12 5C15.9 5 19 8.1 19 12C19 15.9 15.9 19 12 19C8.1 19 5 15.9 5 12C5 8.1 8.1 5 12 5ZM12 4C7.6 4 4 7.6 4 12C4 16.4 7.6 20 12 20C16.4 20 20 16.4 20 12C20 7.6 16.4 4 12 4Z"}),(0,i.jsx)("path",{d:"M7 11H17V13H7V11Z"})]})}}}]);
//# sourceMappingURL=Project.7ba76e2f.chunk.js.map