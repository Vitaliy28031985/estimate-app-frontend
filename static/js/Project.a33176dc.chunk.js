"use strict";(self.webpackChunkestimate_app_frontend=self.webpackChunkestimate_app_frontend||[]).push([[962],{6837:(e,t,s)=>{s.r(t),s.d(t,{default:()=>ue});var i=s(7689),a=s(2791),n=s(4420),l=s(6435),o=s.n(l),c=s(5834),r=s(828),d=s(5147),u=s(1018),h=s(9728),m=s(663),x=s(9085),j=(s(5462),s(7113)),p=s(2457);const _="Select_label__QMERC",b="Select_input__P2+h8",v="Select_button__6gBiO";var A=s(3329);const g=function(e){var t;let{isShowModal:s,add:i}=e;const[n,l]=(0,a.useState)(""),{data:o}=(0,p.xo)(),[c,r]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),[h,m]=(0,a.useState)(""),j=n.toLowerCase(),g=null!==(t=null===o||void 0===o?void 0:o.filter((e=>e.title.toLowerCase().includes(j))))&&void 0!==t?t:[],w=e=>{const{name:t,value:s}=e.currentTarget;switch(t){case"title":r(s);break;case"unit":u(s);break;case"number":m(s);break;default:return}};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("input",{onChange:e=>l(e.target.value),value:n,type:"text",className:b,placeholder:"\u041f\u043e\u0448\u0443\u043a \u0437 \u043f\u0440\u0430\u0439\u0441\u0443"}),(0,A.jsxs)("form",{action:"",onSubmit:async e=>{if(e.preventDefault(),"empty"===c||""===d||""===h||""===c)return void(0,x.Am)("\u0423\u0441\u0456 \u043f\u043e\u043b\u044f \u043c\u0430\u044e\u0442\u044c \u0431\u0443\u0442\u0438 \u0437\u0430\u043f\u043e\u0432\u043d\u0435\u043d\u0456");const t=(await(null===o||void 0===o?void 0:o.filter((e=>e.title===c))))[0].price;await i({title:c,unit:d,number:Number(h),price:t}),r(""),m(""),u(""),s()},children:[(0,A.jsxs)("select",{className:b,name:"title",id:"title",onChange:w,children:[g&&(null===g||void 0===g?void 0:g.map((e=>{let{title:t,price:s}=e;return(0,A.jsx)("option",{value:t,children:t})}))),(0,A.jsx)("option",{value:"empty",selected:!0,children:"\u0412\u0438\u0431\u0435\u0440\u0438 \u0432\u0438\u0434 \u0440\u043e\u0431\u043e\u0442\u0438"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("p",{className:_,children:"\u041e\u0434\u0438\u043d\u0438\u0446\u044f"}),(0,A.jsx)("input",{className:b,type:"text",value:d,name:"unit",onChange:w})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("p",{className:_,children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"}),(0,A.jsx)("input",{className:b,type:"number",value:h,name:"number",onChange:w})]}),(0,A.jsx)("button",{className:v,children:"\u0414\u043e\u0434\u0430\u0442\u0438"})]})]})},w="Input_label__JCAog",N="Input_input__o1gwc",C="Input_button__USz93";const S=function(e){let{isShowModal:t,add:s}=e;const[i,n]=(0,a.useState)(""),[l,o]=(0,a.useState)(""),[c,r]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),h=e=>{const{name:t,value:s}=e.currentTarget;switch(t){case"title":n(s);break;case"unit":o(s);break;case"number":r(s);break;case"price":u(s);break;default:return}};return(0,A.jsxs)("form",{action:"",onSubmit:async e=>{if(e.preventDefault(),""===l||""===c||""===i||""===d)return void(0,x.Am)("\u0423\u0441\u0456 \u043f\u043e\u043b\u044f \u043c\u0430\u044e\u0442\u044c \u0431\u0443\u0442\u0438 \u0437\u0430\u043f\u043e\u0432\u043d\u0435\u043d\u0456");const a={title:i,unit:l,number:Number(c),price:Number(d)};await s({title:i,unit:l,number:Number(c),price:Number(d)}),console.log(a),n(""),r(""),o(""),t()},children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("p",{className:w,children:"\u041d\u0430\u0437\u0432\u0430 \u0440\u043e\u0431\u043e\u0442\u0438"}),(0,A.jsx)("input",{className:N,name:"title",value:i,id:"title",onChange:h})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("p",{className:w,children:"\u041e\u0434\u0438\u043d\u0438\u0446\u044f"}),(0,A.jsx)("input",{className:N,type:"text",value:l,name:"unit",onChange:h})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("p",{className:w,children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"}),(0,A.jsx)("input",{className:N,type:"number",value:c,name:"number",onChange:h})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("p",{className:w,children:"\u0426\u0456\u043d\u0430"}),(0,A.jsx)("input",{className:N,type:"number",value:d,name:"price",onChange:h})]}),(0,A.jsx)("button",{className:C,children:"\u0414\u043e\u0434\u0430\u0442\u0438"})]})},f="AddPosition_container__pO8O7",P="AddPosition_closeButton__q9-9I",I="AddPosition_positionContainer__QeSCp";const y=function(e){let{isShowModal:t,add:s}=e;const[i,n]=(0,a.useState)(!1),l=()=>{n((e=>!e))};return(0,A.jsxs)("div",{className:f,children:[(0,A.jsx)("button",{className:P,type:"button",onClick:t,children:(0,A.jsx)(j.Z,{width:"24",height:"24"})}),(0,A.jsx)(x.Ix,{draggable:!0}),i?(0,A.jsx)(S,{isShowModal:t,add:s}):(0,A.jsx)(g,{isShowModal:t,add:s}),i?(0,A.jsxs)("div",{className:I,children:[(0,A.jsx)("p",{children:"\u0423 \u0432\u0430\u0441 \u0454 \u0446\u044f \u043f\u043e\u0437\u0438\u0446\u0456\u044f \u0432 \u043f\u0440\u0430\u0439\u0441\u0456?"}),(0,A.jsx)("button",{type:"button",onClick:l,children:"\u041f\u0440\u0435\u0439\u0442\u0438 \u0449\u043e\u0431 \u0434\u043e\u0434\u0430\u0442\u0438"})]}):(0,A.jsxs)("div",{className:I,children:[(0,A.jsx)("p",{children:"\u0412\u0438 \u0445\u043e\u0447\u0438\u0442\u0435 \u0434\u043e\u0434\u0430\u0442\u0438 \u043f\u043e\u0437\u0438\u0446\u0456\u044e \u044f\u043a\u043e\u0457 \u043d\u0435\u043c\u0430\u0454 \u0432 \u043f\u0440\u0430\u0439\u0441\u0456 ?"}),(0,A.jsx)("button",{type:"button",onClick:l,children:"\u041f\u0440\u0435\u0439\u0442\u0438 \u0449\u043e\u0431 \u0434\u043e\u0434\u0430\u0442\u0438"})]})]})},k="AddEstimate_container__BE+Nb",E="AddEstimate_closeButton__KVf5C",M="AddEstimate_label__gg7QK",B="AddEstimate_input__0Jq4c",D="AddEstimate_button__JxdUx";const Z=function(e){let{isShowModal:t,idData:s}=e;const[i,l]=(0,a.useState)(""),[o]=(0,d.Dz)(),c=(0,n.I0)();return(0,A.jsxs)("div",{className:k,children:[(0,A.jsx)(x.Ix,{draggable:!0}),(0,A.jsx)("button",{className:E,type:"button",onClick:t,children:(0,A.jsx)(j.Z,{width:"24",height:"24"})}),(0,A.jsxs)("form",{action:"",onSubmit:async e=>{if(e.preventDefault(),!i)return void(0,x.Am)("\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c \u0443\u0441\u0456 \u043f\u043e\u043b\u044f");const a={id:s,estimates:{title:i||""}};try{await o(a),c(r.qx.util.resetApiState())}catch(n){console.error("Error adding estimate:",n)}l(""),t()},children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("p",{className:M,children:"\u041d\u0430\u0439\u043c\u0435\u043d\u0443\u0432\u0430\u043d\u043d\u044f"}),(0,A.jsx)("input",{type:"text",name:"title",className:B,onChange:e=>{const{name:t,value:s}=e.currentTarget;"title"===t&&l(s)},value:i})]}),(0,A.jsx)("button",{className:D,children:"\u0414\u043e\u0434\u0430\u0442\u0438"})]})]})},U="ProjectItem_title__h9Y0J",H="ProjectItem_address__6rgST",Q="ProjectItem_titleTable__mdu0h",T="ProjectItem_iksweb__D1h0m",O="ProjectItem_titleRow__Syb5w",V="ProjectItem_dataRow__BQcGC",F="ProjectItem_oneRow__1YePW",R="ProjectItem_twoRow__sILs0",Y="ProjectItem_threeRow__3IrUH",z="ProjectItem_threeSix__axFxv",q="ProjectItem_total__brM1k",J="ProjectItem_buttonAddContainer__CCrUD",L="ProjectItem_buttonAdd__XtEBi",K="ProjectItem_buttonAddTitle__hYwer",G="ProjectItem_buttonDeletePosition__FrfNT",W="ProjectItem_createPdfFileButton__ph2ll",X="ProjectItem_buttonsContainer__g9NQQ",$="ProjectItem_buttonDelete__MAwC4";var ee=s(4132),te=s(5542);const se="UpdatePosition_container__wHT3s",ie="UpdatePosition_closeButton__Eg48F",ae="UpdatePosition_label__7PE2B",ne="UpdatePosition_input__1Kemb",le="UpdatePosition_button__LjPr1";const oe=function(e){let{isShowModal:t,idsData:s,newPosition:i}=e;const[l]=(0,u.LO)(),o=(0,n.I0)(),[c,d]=(0,a.useState)(null===i||void 0===i?void 0:i.title),[h,m]=(0,a.useState)(i.unit),[p,_]=(0,a.useState)(i.number),[b,v]=(0,a.useState)(i.price);console.log(c);const g=e=>{const{name:t,value:s}=e.currentTarget;switch(t){case"title":d(s);break;case"unit":m(s);break;case"number":_(s);break;case"price":v(s);break;default:return}};return(0,A.jsxs)("div",{className:se,children:[(0,A.jsx)("button",{className:ie,type:"button",onClick:t,children:(0,A.jsx)(j.Z,{width:"24",height:"24"})}),(0,A.jsx)(x.Ix,{draggable:!0}),(0,A.jsxs)("form",{action:"",onSubmit:async e=>{if(e.preventDefault(),""===h||""===p||""===c||""===b)return void(0,x.Am)("\u0423\u0441\u0456 \u043f\u043e\u043b\u044f \u043c\u0430\u044e\u0442\u044c \u0431\u0443\u0442\u0438 \u0437\u0430\u043f\u043e\u0432\u043d\u0435\u043d\u0456");const i={title:c,unit:h,number:Number(p),price:Number(b)};await l([s[1],s[0],s[2],i]),o(r.qx.util.resetApiState()),d(""),_(""),m(""),t()},children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("p",{className:ae,children:"\u041d\u0430\u0437\u0432\u0430 \u0440\u043e\u0431\u043e\u0442\u0438"}),(0,A.jsx)("input",{className:ne,name:"title",value:c,id:"title",onChange:g})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("p",{className:ae,children:"\u041e\u0434\u0438\u043d\u0438\u0446\u044f"}),(0,A.jsx)("input",{className:ne,type:"text",value:h,name:"unit",onChange:g})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("p",{className:ae,children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"}),(0,A.jsx)("input",{className:ne,type:"number",value:p,name:"number",onChange:g})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("p",{className:ae,children:"\u0426\u0456\u043d\u0430"}),(0,A.jsx)("input",{className:ne,type:"number",value:b,name:"price",onChange:g})]}),(0,A.jsx)("button",{className:le,children:"\u0414\u043e\u0434\u0430\u0442\u0438"})]})]})};const ce=function(){const[e,t]=(0,a.useState)(!1),[s,l]=(0,a.useState)(!1),[j,p]=(0,a.useState)(!1),[_,b]=(0,a.useState)(!1),[v,g]=(0,a.useState)({}),[w,N]=(0,a.useState)([]),[C,S]=(0,a.useState)({}),{id:f}=(0,i.UO)(),P=(0,n.I0)(),{data:I,error:k}=(0,r.ai)(f),[E]=(0,d.BP)(),[M]=(0,u.d1)(),[B]=(0,u.Vv)();let D="",se="",ie="",ae="",ne="",le={};if(k)return(0,A.jsx)("div",{children:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u0443"});const ce=async(s,i)=>{e||(D=await s,se=await i,await g({idEst:D,idPos:se})),t((e=>!e))},re=()=>{l((e=>!e))},de=()=>{p((e=>!e))},ue=()=>{b((e=>!e))};return o().vfs=c.I.vfs,(0,A.jsxs)("div",{children:[(0,A.jsx)(x.Ix,{draggable:!0}),(0,A.jsx)("button",{className:W,onClick:()=>{if(I){const e=[{text:"\u041d\u0430\u0437\u0432\u0430 \u043e\u0431'\u0454\u043a\u0442\u0443:          ".concat(null===I||void 0===I?void 0:I.title),fontSize:25},{text:"\u0410\u0434\u0440\u0435\u0441\u0430:                                                 ".concat(null===I||void 0===I?void 0:I.description),fontSize:14,marginTop:10}];I.estimates.forEach((t=>{var s;e.push({text:null===t||void 0===t?void 0:t.title,fontSize:16,bold:!0,marginTop:30,marginBottom:10,marginLeft:200},{table:{headerRows:1,widths:["auto","auto","auto","auto","auto","auto"],body:[["\u2116 \u0437/\u043f.","\u041d\u0430\u0437\u0432\u0430","\u041e\u0434\u0438\u043d\u0438\u0446\u044f","\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c","\u0426\u0456\u043d\u0430 \u0432 \u0433\u0440\u043d.","\u0421\u0443\u043c\u0430 \u0432 \u0433\u0440\u043d."],...(null===t||void 0===t||null===(s=t.positions)||void 0===s?void 0:s.map(((e,t)=>{let{title:s,unit:i,price:a,number:n,result:l}=e;return[t+1,s||"",i||"",n||"",a||"",l||""]})))||[],[{},{},{},{},"\u0412\u0441\u044c\u043e\u0433\u043e:",null===t||void 0===t?void 0:t.total]]},layout:"lightHorizontalLines",style:"tableExample"})})),e.push({text:"\u0417\u0430\u0433\u0430\u043b\u044c\u043d\u0430 \u0441\u0443\u043c\u0430:                            ".concat(null===I||void 0===I?void 0:I.total),fontSize:30,marginTop:30});const t={content:e,styles:{tableExample:{margin:[0,5,0,15],fontSize:12,color:"#333"}}};o().createPdf(t).download("".concat(null===I||void 0===I?void 0:I.title,".pdf"))}},children:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 PDF \u0444\u0430\u0439\u043b"}),I&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:J,children:[(0,A.jsxs)("p",{className:U,children:["\u041d\u0430\u0437\u0432\u0430 \u043e\u0431'\u0454\u043a\u0442\u0443: ",I.title]}),(0,A.jsx)("button",{type:"button",className:K,onClick:re,children:(0,A.jsx)(h.Z,{width:"24",height:"24"})})]}),I.description&&(0,A.jsxs)("p",{className:H,children:["\u0410\u0434\u0440\u0435\u0441\u0430: ",I.description]}),I.estimates&&I.estimates.map((e=>(0,A.jsxs)("div",{children:[(0,A.jsxs)("div",{className:J,children:[(0,A.jsx)("p",{className:Q,children:e.title}),(0,A.jsx)("button",{type:"button",className:K,onClick:()=>(async(e,t)=>{await E({idPro:e,idEst:t}),P(r.qx.util.resetApiState()),(0,x.Am)("\u0422\u0430\u0431\u043b\u0438\u0446\u044e \u043a\u043e\u0448\u0442\u043e\u0440\u0438\u0441\u0443 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e")})(null===I||void 0===I?void 0:I._id,null===e||void 0===e?void 0:e._id),children:(0,A.jsx)(m.Z,{width:"24",height:"24"})})]}),(0,A.jsx)("table",{className:T,children:(0,A.jsxs)("tbody",{children:[(0,A.jsxs)("tr",{className:O,children:[(0,A.jsx)("td",{className:F,children:"\u2116 \u0437/\u043f."}),(0,A.jsxs)("td",{className:R,children:["\u041d\u0430\u0437\u0432\u0430",(0,A.jsx)("button",{type:"button",onClick:()=>I&&e._id&&ce(e._id,I._id),className:L,children:(0,A.jsx)(h.Z,{width:"24",height:"24"})})]}),(0,A.jsx)("td",{className:Y,children:"\u041e\u0434\u0438\u043d\u0438\u0446\u044f"}),(0,A.jsx)("td",{className:Y,children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"}),(0,A.jsx)("td",{className:Y,children:"\u0426\u0456\u043d\u0430 \u0432 \u0433\u0440\u043d."}),(0,A.jsx)("td",{className:z,children:"\u0421\u0443\u043c\u0430 \u0432 \u0433\u0440\u043d."})]}),e.positions&&e.positions.map(((t,s)=>{let{_id:i,id:a,title:n,unit:l,price:o,number:c,result:d}=t;return(0,A.jsxs)("tr",{className:V,children:[(0,A.jsx)("td",{className:F,children:s+1}),(0,A.jsxs)("td",{children:[(0,A.jsx)("button",{type:"button",onClick:de,className:G,children:(0,A.jsx)(h.Z,{width:"24",height:"24"})}),j&&(0,A.jsxs)("div",{className:X,children:[(0,A.jsx)("button",{className:$,onClick:()=>(async(e,t,s,i)=>{ie=await e,ae=await t,ne=await s,le=await i,await N([ie,ae,ne]),await S(le),ue()})(e._id,I._id,a,{title:n,unit:l,price:o,number:c}),children:(0,A.jsx)("img",{src:te,width:"20",height:"20",alt:"update"})}),(0,A.jsx)("button",{className:G,onClick:()=>(async(e,t,s)=>{await M({idPro:t,idEst:e,idPos:s}),P(r.qx.util.resetApiState()),(0,x.Am)("\u041f\u043e\u0437\u0438\u0446\u0456\u044e \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e")})(e._id,I._id,a),children:(0,A.jsx)(m.Z,{width:"24",height:"24"})})]}),n]}),(0,A.jsx)("td",{className:Y,children:l}),(0,A.jsx)("td",{className:Y,children:c}),(0,A.jsx)("td",{className:Y,children:o}),(0,A.jsx)("td",{className:z,children:d})]},i)})),(0,A.jsxs)("tr",{className:"title-row",children:[(0,A.jsx)("td",{colSpan:"5",children:"\u0412\u0441\u044c\u043e\u0433\u043e:"}),(0,A.jsx)("td",{className:z,children:e.total})]})]})})]},e._id)))]}),(0,A.jsxs)("div",{className:q,children:[(0,A.jsx)("p",{children:"\u0417\u0430\u0433\u0430\u043b\u044c\u043d\u0430 \u0441\u0443\u043c\u0430: "}),I&&(0,A.jsx)("p",{children:I.total})]}),e&&(0,A.jsx)(ee.Z,{children:(0,A.jsx)(y,{isShowModal:ce,add:async e=>{const t={idEst:v.idEst,idPos:v.idPos,position:e};await B(t),P(r.qx.util.resetApiState()),(0,x.Am)("\u041f\u043e\u0437\u0438\u0446\u0456\u044e \u0434\u043e\u0434\u0430\u043d\u043e")}})}),s&&(0,A.jsx)(ee.Z,{children:(0,A.jsx)(Z,{idData:f,isShowModal:re})}),_&&(0,A.jsx)(ee.Z,{children:(0,A.jsx)(oe,{idsData:w,isShowModal:ue,newPosition:C})})]})},re="Project_projectContainer__1NP4c",de="Project_titleEst__bB-cB";const ue=function(){return(0,A.jsxs)("div",{className:re,children:[(0,A.jsx)("h1",{className:de,children:"\u041a\u041e\u0428\u0422\u041e\u0420\u0418\u0421"}),(0,A.jsx)(ce,{})]})}},9728:(e,t,s)=>{s.d(t,{Z:()=>a});var i=s(3329);const a=function(e){let{width:t,height:s}=e;return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:s,viewBox:"0 0 24 24",fill:"none",children:[(0,i.jsx)("path",{d:"M12 5C15.9 5 19 8.1 19 12C19 15.9 15.9 19 12 19C8.1 19 5 15.9 5 12C5 8.1 8.1 5 12 5ZM12 4C7.6 4 4 7.6 4 12C4 16.4 7.6 20 12 20C16.4 20 20 16.4 20 12C20 7.6 16.4 4 12 4Z","fill-opacity":"0.6"}),(0,i.jsx)("path",{d:"M17 11H13V7H11V11H7V13H11V17H13V13H17V11Z","fill-opacity":"0.6"})]})}},663:(e,t,s)=>{s.d(t,{Z:()=>a});var i=s(3329);const a=function(e){let{width:t,height:s}=e;return(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:s,viewBox:"0 0 24 24",fill:"none",children:[(0,i.jsx)("path",{d:"M12 5C15.9 5 19 8.1 19 12C19 15.9 15.9 19 12 19C8.1 19 5 15.9 5 12C5 8.1 8.1 5 12 5ZM12 4C7.6 4 4 7.6 4 12C4 16.4 7.6 20 12 20C16.4 20 20 16.4 20 12C20 7.6 16.4 4 12 4Z"}),(0,i.jsx)("path",{d:"M7 11H17V13H7V11Z"})]})}},5542:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAHlJREFUOI1jYBjsQA6KiQY6UPoREP9Hw4+IMWAeVPFfIJZCEgex/0Dl8IIJSDY6YpH/Q8glTkDsjEdemhhXEAIgA2SxScgRaTpOA2CS0ng0E/QCKID+4pEHyT3EZwDMFSCFMkhiMlAxogPwIQNmQiJoMzYgg+aSQQgAOwgkqnFJV4oAAAAASUVORK5CYII="}}]);
//# sourceMappingURL=Project.a33176dc.chunk.js.map