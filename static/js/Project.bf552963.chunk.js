"use strict";(self.webpackChunkestimate_app_frontend=self.webpackChunkestimate_app_frontend||[]).push([[962],{1754:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Te});var i=s(2791),a=s(7689),n=s(1087),l=s(4420),d=s(6435),c=s.n(d),o=s(5834),r=s(828),u=s(5147),m=s(1018),h=s(3602),x=s(9728),j=s(663),p=s(9085),v=(s(5462),s(7113)),_=s(2457),N=s(3449);const b="Select_label__QMERC",g="Select_input__P2+h8",f="Select_button__6gBiO";var S=s(3329);const w=function(e){var t;let{isShowModal:s,add:a}=e;const[n,l]=(0,i.useState)(""),{data:d}=(0,_.xo)(),{data:c}=(0,N.GR)(),[o,r]=(0,i.useState)(""),[u,m]=(0,i.useState)(""),[h,x]=(0,i.useState)(""),j=n.toLowerCase(),v=null!==(t=null===d||void 0===d?void 0:d.filter((e=>e.title.toLowerCase().includes(j))))&&void 0!==t?t:[],w=e=>{const{name:t,value:s}=e.currentTarget;switch(t){case"title":r(s);break;case"unit":m(s);break;case"number":x(s);break;default:return}};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("input",{onChange:e=>l(e.target.value),value:n,type:"text",className:g,placeholder:"\u041f\u043e\u0448\u0443\u043a \u0437 \u043f\u0440\u0430\u0439\u0441\u0443"}),(0,S.jsxs)("form",{action:"",onSubmit:async e=>{if(e.preventDefault(),"empty"===o||""===u||""===h||""===o)return void(0,p.Am)("\u0423\u0441\u0456 \u043f\u043e\u043b\u044f \u043c\u0430\u044e\u0442\u044c \u0431\u0443\u0442\u0438 \u0437\u0430\u043f\u043e\u0432\u043d\u0435\u043d\u0456");const t=(await(null===d||void 0===d?void 0:d.filter((e=>e.title===o))))[0].price;await a({title:o,unit:u,number:Number(h),price:t}),r(""),x(""),m(""),s()},children:[(0,S.jsxs)("select",{className:g,name:"title",id:"title",onChange:w,children:[v&&(null===v||void 0===v?void 0:v.map((e=>{let{title:t,price:s}=e;return(0,S.jsx)("option",{value:t,children:t})}))),(0,S.jsx)("option",{value:"empty",selected:!0,children:"\u0412\u0438\u0431\u0435\u0440\u0438 \u0432\u0438\u0434 \u0440\u043e\u0431\u043e\u0442\u0438"})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{for:"unit",className:b,children:"\u041e\u0434\u0438\u043d\u0438\u0446\u044f"}),(0,S.jsxs)("select",{className:g,name:"unit",id:"unit",onChange:w,children:[c&&(null===c||void 0===c?void 0:c.map((e=>{let{title:t}=e;return(0,S.jsx)("option",{value:t,children:t})}))),(0,S.jsx)("option",{value:"empty",selected:!0,children:"\u0412\u0438\u0431\u0435\u0440\u0438 \u043e\u0434\u0438\u043d\u0438\u0446\u044e \u0432\u0438\u043c\u0456\u0440\u0443"})]})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{for:"number",className:b,children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"}),(0,S.jsx)("input",{className:g,type:"number",value:h,name:"number",id:"number",onChange:w})]}),(0,S.jsx)("button",{className:f,children:"\u0414\u043e\u0434\u0430\u0442\u0438"})]})]})},P="Input_label__JCAog",C="Input_input__o1gwc",I="Input_button__USz93";const y=function(e){let{isShowModal:t,add:s}=e;const[a,n]=(0,i.useState)(""),[l,d]=(0,i.useState)(""),[c,o]=(0,i.useState)(""),[r,u]=(0,i.useState)(""),m=e=>{const{name:t,value:s}=e.currentTarget;switch(t){case"title":n(s);break;case"unit":d(s);break;case"number":o(s);break;case"price":u(s);break;default:return}};return(0,S.jsxs)("form",{action:"",onSubmit:async e=>{if(e.preventDefault(),""===l||""===c||""===a||""===r)return void(0,p.Am)("\u0423\u0441\u0456 \u043f\u043e\u043b\u044f \u043c\u0430\u044e\u0442\u044c \u0431\u0443\u0442\u0438 \u0437\u0430\u043f\u043e\u0432\u043d\u0435\u043d\u0456");const i={title:a,unit:l,number:Number(c),price:Number(r)};await s({title:a,unit:l,number:Number(c),price:Number(r)}),console.log(i),n(""),o(""),d(""),t()},children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:P,children:"\u041d\u0430\u0437\u0432\u0430 \u0440\u043e\u0431\u043e\u0442\u0438"}),(0,S.jsx)("input",{className:C,name:"title",value:a,id:"title",onChange:m})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:P,children:"\u041e\u0434\u0438\u043d\u0438\u0446\u044f"}),(0,S.jsx)("input",{className:C,type:"text",value:l,name:"unit",onChange:m})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:P,children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"}),(0,S.jsx)("input",{className:C,type:"number",value:c,name:"number",onChange:m})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:P,children:"\u0426\u0456\u043d\u0430"}),(0,S.jsx)("input",{className:C,type:"number",value:r,name:"price",onChange:m})]}),(0,S.jsx)("button",{className:I,children:"\u0414\u043e\u0434\u0430\u0442\u0438"})]})},T="AddPosition_container__pO8O7",E="AddPosition_closeButton__q9-9I",k="AddPosition_positionContainer__QeSCp";const A=function(e){let{isShowModal:t,add:s}=e;const[a,n]=(0,i.useState)(!1),l=()=>{n((e=>!e))};return(0,S.jsxs)("div",{className:T,children:[(0,S.jsx)("button",{className:E,type:"button",onClick:t,children:(0,S.jsx)(v.Z,{width:"24",height:"24"})}),(0,S.jsx)(p.Ix,{draggable:!0}),a?(0,S.jsx)(y,{isShowModal:t,add:s}):(0,S.jsx)(w,{isShowModal:t,add:s}),a?(0,S.jsxs)("div",{className:k,children:[(0,S.jsx)("p",{children:"\u0423 \u0432\u0430\u0441 \u0454 \u0446\u044f \u043f\u043e\u0437\u0438\u0446\u0456\u044f \u0432 \u043f\u0440\u0430\u0439\u0441\u0456?"}),(0,S.jsx)("button",{type:"button",onClick:l,children:"\u041f\u0440\u0435\u0439\u0442\u0438 \u0449\u043e\u0431 \u0434\u043e\u0434\u0430\u0442\u0438"})]}):(0,S.jsxs)("div",{className:k,children:[(0,S.jsx)("p",{children:"\u0412\u0438 \u0445\u043e\u0447\u0438\u0442\u0435 \u0434\u043e\u0434\u0430\u0442\u0438 \u043f\u043e\u0437\u0438\u0446\u0456\u044e \u044f\u043a\u043e\u0457 \u043d\u0435 \u043c\u0430\u0454 \u0432 \u043f\u0440\u0430\u0439\u0441\u0456 ?"}),(0,S.jsx)("button",{type:"button",onClick:l,children:"\u041f\u0440\u0435\u0439\u0442\u0438 \u0449\u043e\u0431 \u0434\u043e\u0434\u0430\u0442\u0438"})]})]})},z="AddEstimate_container__BE+Nb",D="AddEstimate_closeButton__KVf5C",B="AddEstimate_label__gg7QK",L="AddEstimate_input__0Jq4c",F="AddEstimate_button__JxdUx";const U=function(e){let{isShowModal:t,idData:s}=e;const[a,n]=(0,i.useState)(""),[d]=(0,u.Dz)(),c=(0,l.I0)();return(0,S.jsxs)("div",{className:z,children:[(0,S.jsx)(p.Ix,{draggable:!0}),(0,S.jsx)("button",{className:D,type:"button",onClick:t,children:(0,S.jsx)(v.Z,{width:"24",height:"24"})}),(0,S.jsxs)("form",{action:"",onSubmit:async e=>{if(e.preventDefault(),!a)return void(0,p.Am)("\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c \u0443\u0441\u0456 \u043f\u043e\u043b\u044f");const i={id:s,estimates:{title:a||""}};try{await d(i),c(r.qx.util.resetApiState())}catch(l){console.error("Error adding estimate:",l)}n(""),t()},children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:B,children:"\u041d\u0430\u0439\u043c\u0435\u043d\u0443\u0432\u0430\u043d\u043d\u044f"}),(0,S.jsx)("input",{type:"text",name:"title",className:L,onChange:e=>{const{name:t,value:s}=e.currentTarget;"title"===t&&n(s)},value:a})]}),(0,S.jsx)("button",{className:F,children:"\u0414\u043e\u0434\u0430\u0442\u0438"})]})]})},M="UpdateEstimate_container__Bo31F",Z="UpdateEstimate_closeButton__6xCB3",R="UpdateEstimate_label__Svwy1",O="UpdateEstimate_input__V-sTR",q="UpdateEstimate_button__abV5r";const H=function(e){let{isShowModal:t,idData:s}=e;const[a,n]=(0,i.useState)(s.currentName),[d]=(0,u.HP)(),c=(0,l.I0)();return(0,S.jsxs)("div",{className:M,children:[(0,S.jsx)(p.Ix,{draggable:!0}),(0,S.jsx)("button",{className:Z,type:"button",onClick:t,children:(0,S.jsx)(v.Z,{width:"24",height:"24"})}),(0,S.jsxs)("form",{action:"",onSubmit:async e=>{if(e.preventDefault(),a){try{await d([s.projId,s.estId,{title:a}]),c(r.qx.util.resetApiState())}catch(i){console.error("Error adding estimate:",i)}n(""),t()}else(0,p.Am)("\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c \u0443\u0441\u0456 \u043f\u043e\u043b\u044f")},children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:R,children:"\u041d\u0430\u0439\u043c\u0435\u043d\u0443\u0432\u0430\u043d\u043d\u044f"}),(0,S.jsx)("input",{type:"text",name:"title",className:O,onChange:e=>{const{name:t,value:s}=e.currentTarget;"title"===t&&n(s)},value:a})]}),(0,S.jsx)("button",{className:q,children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u0438"})]})]})},Q={titleContainer:"ForbiddenPage_titleContainer__gq+LK",picture:"ForbiddenPage_picture__gpbQn"};const V=function(){return(0,S.jsxs)("div",{className:Q.container,children:[(0,S.jsxs)("div",{className:Q.titleContainer,children:[(0,S.jsx)("h1",{children:"\u0426\u0435\u0439 \u043a\u043e\u0448\u0442\u043e\u0440\u0438\u0441 \u0412\u0430\u043c \u043d\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0438\u0439"}),(0,S.jsx)("p",{children:"\u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0437\u0432\u0435\u0440\u043d\u0456\u0442\u044c\u0441\u044f \u0437\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u043e\u043c \u0434\u043e \u0432\u043b\u0430\u0441\u043d\u0438\u043a\u0430 \u043a\u043e\u0448\u0442\u043e\u0440\u0438\u0441\u0443!!!"})]}),(0,S.jsx)("div",{className:Q.picture})]})},G="ProjectItem_title__h9Y0J",J="ProjectItem_address__6rgST",K="ProjectItem_titleTable__mdu0h",Y="ProjectItem_iksweb__D1h0m",W="ProjectItem_titleRow__Syb5w",X="ProjectItem_dataRow__BQcGC",$="ProjectItem_oneRow__1YePW",ee="ProjectItem_twoRow__sILs0",te="ProjectItem_threeRow__3IrUH",se="ProjectItem_threeRowTitleText__E2EOv",ie="ProjectItem_threeSix__axFxv",ae="ProjectItem_total__brM1k",ne="ProjectItem_buttonAddContainer__CCrUD",le="ProjectItem_buttonAdd__XtEBi",de="ProjectItem_buttonAddTitle__hYwer",ce="ProjectItem_buttonDeletePosition__FrfNT",oe="ProjectItem_createPdfFileButton__ph2ll",re="ProjectItem_input__S5G+F",ue="ProjectItem_inputTitle__Bvx4x",me="ProjectItem_buttonUpdate__6M7pB",he="ProjectItem_buttonUpdateEstimate__+LxHb",xe="ProjectItem_linksList__PUkxn",je="ProjectItem_buttonNav__TeRV-",pe="ProjectItem_buttonNavLink__94kd7",ve="ProjectItem_buttonNavCurrent__8nrhU",_e="ProjectItem_deleteModalContainer__ELPlF",Ne="ProjectItem_buttonContainer__yrlc8",be="ProjectItem_onDelete__xGueb",ge="ProjectItem_noDelete__UTek2";var fe=s(4132),Se=s(5413),we=s(1988);const Pe=function(){const{id:e}=(0,a.UO)(),{data:t,error:s}=(0,r.ai)(e),{data:d}=(0,h.sA)(),[v]=(0,m.LO)(),[_,N]=(0,i.useState)(t),[b,g]=(0,i.useState)(!1);(0,i.useEffect)((()=>{if(N(t),d){var e;const t=null===d||void 0===d||null===(e=d.user)||void 0===e?void 0:e.role;g("customer"!==t)}}),[t,d,b]);const[f,w]=(0,i.useState)(!1),[P,C]=(0,i.useState)(!1),[I,y]=(0,i.useState)(!1),[T,E]=(0,i.useState)({}),[k,z]=(0,i.useState)({}),D=(0,l.I0)(),[B]=(0,u.BP)(),[L]=(0,m.d1)(),[F]=(0,m.Vv)();let M="",Z="",R="",O="",q="";if(s)return(0,S.jsx)("div",{children:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u0443"});const Q=async(e,t)=>{f||(M=await e,Z=await t,await E({idEst:M,idPos:Z})),w((e=>!e))},Pe=()=>{C((e=>!e))},Ce=()=>{y((e=>!e))};c().vfs=o.I.vfs;const Ie=(e,t,s)=>{N((i=>{const a={...i},n=a.estimates.map((i=>{const a=i.positions.map((i=>{if(i._id===e){if("update"===s)return{...i,isShow:t};if("delete"===s)return{...i,isDelete:t}}return i}));return{...i,positions:a}}));return a.estimates=n,a}))},ye=e=>{const{name:t,value:s,id:i}=e.currentTarget;N((e=>{const a={...e},n=a.estimates.map((e=>{const a=e.positions.map((e=>e._id===i&&t===t?{...e,[t]:s}:e));return{...e,positions:a}}));return a.estimates=n,a}))};return(0,S.jsx)(S.Fragment,{children:void 0===t?(0,S.jsx)(V,{}):(0,S.jsxs)("div",{children:[(0,S.jsxs)("ul",{className:xe,children:[(0,S.jsx)("li",{className:ve,children:"\u041a\u043e\u0448\u0442\u043e\u0440\u0438\u0441"}),(0,S.jsx)("li",{className:je,children:(0,S.jsx)(n.OL,{className:pe,to:"/materials/".concat(null===_||void 0===_?void 0:_._id),children:"\u041c\u0430\u0442\u0435\u0440\u0456\u0430\u043b\u0438"})}),(0,S.jsx)("li",{className:je,children:(0,S.jsx)(n.OL,{className:pe,to:"/advances/".concat(null===_||void 0===_?void 0:_._id),children:"\u0410\u0432\u0430\u043d\u0441"})})]}),(0,S.jsx)(p.Ix,{draggable:!0}),(0,S.jsx)("button",{className:oe,onClick:()=>{if(_){const e=[{text:"\u041d\u0430\u0437\u0432\u0430 \u043e\u0431'\u0454\u043a\u0442\u0443:          ".concat(null===_||void 0===_?void 0:_.title),fontSize:25},{text:"\u0410\u0434\u0440\u0435\u0441\u0430:                                                 ".concat(null===_||void 0===_?void 0:_.description),fontSize:14,marginTop:10}];_.estimates.forEach((t=>{var s;e.push({text:null===t||void 0===t?void 0:t.title,fontSize:16,bold:!0,marginTop:30,marginBottom:10,marginLeft:200},{table:{headerRows:1,widths:["auto","auto","auto","auto","auto","auto"],body:[["\u2116 \u0437/\u043f.","\u041d\u0430\u0437\u0432\u0430","\u041e\u0434\u0438\u043d\u0438\u0446\u044f","\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c","\u0426\u0456\u043d\u0430 \u0432 \u0433\u0440\u043d.","\u0421\u0443\u043c\u0430 \u0432 \u0433\u0440\u043d."],...(null===t||void 0===t||null===(s=t.positions)||void 0===s?void 0:s.map(((e,t)=>{let{title:s,unit:i,price:a,number:n,result:l}=e;return[t+1,s||"",i||"",n||"",a||"",l||""]})))||[],[{},{},{},{},"\u0412\u0441\u044c\u043e\u0433\u043e:",null===t||void 0===t?void 0:t.total]]},layout:"lightHorizontalLines",style:"tableExample"})})),e.push({text:"\u0417\u0430\u0433\u0430\u043b\u044c\u043d\u0430 \u0441\u0443\u043c\u0430:                            ".concat(null===_||void 0===_?void 0:_.total),fontSize:30,marginTop:30}),e.push({text:"\u0412\u0438\u0442\u0440\u0430\u0447\u0435\u043d\u043e \u043d\u0430 \u043c\u0430\u0442\u0435\u0440\u0456\u0430\u043b\u0438:          ".concat(null===_||void 0===_?void 0:_.materialsTotal),fontSize:30,marginTop:30}),e.push({text:"\u0410\u0432\u0430\u043d\u0441:                                             ".concat(null===_||void 0===_?void 0:_.advancesTotal),fontSize:30,marginTop:30}),e.push({text:"\u0414\u043e \u043e\u043f\u043b\u0430\u0442\u0438:                                    ".concat(null===_||void 0===_?void 0:_.general),fontSize:30,marginTop:30});const t={content:e,styles:{tableExample:{margin:[0,5,0,15],fontSize:12,color:"#333"}}};c().createPdf(t).download("".concat(null===_||void 0===_?void 0:_.title,".pdf"))}},children:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 PDF \u0444\u0430\u0439\u043b"}),_&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:ne,children:[(0,S.jsxs)("p",{className:G,children:["\u041d\u0430\u0437\u0432\u0430 \u043e\u0431'\u0454\u043a\u0442\u0443: ",_.title]}),b&&(0,S.jsx)("button",{type:"button",className:de,onClick:Pe,children:(0,S.jsx)(x.Z,{width:"24",height:"24"})})]}),_.description&&(0,S.jsxs)("p",{className:J,children:["\u0410\u0434\u0440\u0435\u0441\u0430: ",_.description]}),_.estimates&&_.estimates.map((e=>(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{className:ne,children:[(0,S.jsx)("p",{className:K,children:e.title}),b&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("button",{type:"button",className:de,onClick:()=>(async(e,t)=>{await B({idPro:e,idEst:t}),D(r.qx.util.resetApiState()),(0,p.Am)("\u0422\u0430\u0431\u043b\u0438\u0446\u044e \u043a\u043e\u0448\u0442\u043e\u0440\u0438\u0441\u0443 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e")})(null===_||void 0===_?void 0:_._id,null===e||void 0===e?void 0:e._id),children:(0,S.jsx)(j.Z,{width:"24",height:"24"})}),(0,S.jsx)("button",{className:he,onClick:()=>(async(e,t,s)=>{await z({projId:e,estId:t,currentName:s}),Ce()})(null===_||void 0===_?void 0:_._id,null===e||void 0===e?void 0:e._id,null===e||void 0===e?void 0:e.title),children:(0,S.jsx)(Se.Z,{width:"28",height:"28"})})]})]}),(0,S.jsx)("table",{className:Y,children:(0,S.jsxs)("tbody",{children:[(0,S.jsxs)("tr",{className:W,children:[(0,S.jsx)("td",{className:$,children:"\u2116 \u0437/\u043f."}),(0,S.jsxs)("td",{className:ee,children:["\u041d\u0430\u0437\u0432\u0430",b&&(0,S.jsx)("button",{type:"button",onClick:()=>_&&e._id&&Q(e._id,_._id),className:le,children:(0,S.jsx)(x.Z,{width:"24",height:"24"})})]}),(0,S.jsx)("td",{className:te,children:(0,S.jsx)("p",{className:se,children:"\u041e\u0434\u0438\u043d\u0438\u0446\u044f"})}),(0,S.jsx)("td",{className:te,children:(0,S.jsx)("p",{className:se,children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"})}),(0,S.jsx)("td",{className:te,children:(0,S.jsx)("p",{className:se,children:"\u0426\u0456\u043d\u0430 \u0432 \u0433\u0440\u043d."})}),(0,S.jsx)("td",{className:ie,children:"\u0421\u0443\u043c\u0430 \u0432 \u0433\u0440\u043d."})]}),e.positions&&e.positions.map(((t,s)=>{let{_id:i,id:a,title:n,unit:l,price:d,number:c,result:o,isShow:u=!1,isDelete:m=!1}=t;return(0,S.jsxs)("tr",{className:X,children:[(0,S.jsxs)("td",{className:$,children:[s+1,b&&(0,S.jsx)("button",{className:me,onClick:()=>{u=!u,Ie(i,u,"update"),u||(async(e,t,s,i)=>{R=await e,O=await t,q=await s,await v([R,O,q,i]),D(r.qx.util.resetApiState())})(_._id,e._id,a,{title:n,unit:l,number:c,price:d})},children:u?(0,S.jsx)(we.Z,{width:"22",height:"22"}):(0,S.jsx)(Se.Z,{width:"22",height:"22"})})]}),(0,S.jsx)("td",{children:u?(0,S.jsx)("input",{id:i,name:"title",className:ue,value:n,disabled:!u,onChange:ye}):(0,S.jsx)("p",{children:n})}),(0,S.jsx)("td",{className:te,children:u?(0,S.jsx)("input",{id:i,name:"unit",className:re,value:l,disabled:!u,onChange:ye}):(0,S.jsx)("p",{children:l})}),(0,S.jsx)("td",{className:te,children:u?(0,S.jsx)("input",{id:i,name:"number",className:re,value:c,disabled:!u,onChange:ye}):(0,S.jsx)("p",{children:c})}),(0,S.jsx)("td",{className:te,children:u?(0,S.jsx)("input",{id:i,name:"price",className:re,value:d,disabled:!u,onChange:ye}):(0,S.jsx)("p",{children:d})}),(0,S.jsxs)("td",{className:ie,children:[o,b&&(0,S.jsx)("button",{className:ce,onClick:()=>{m=!m,Ie(i,m,"delete")},children:(0,S.jsx)(j.Z,{width:"20",height:"20"})}),m&&(0,S.jsxs)("div",{className:_e,children:[(0,S.jsx)("h4",{children:"\u0412\u0438 \u0441\u043f\u0440\u0430\u0432\u0434\u0456 \u0431\u0430\u0436\u0430\u0454\u0442\u0435 \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438: ".concat(n)}),(0,S.jsxs)("ul",{className:Ne,children:[(0,S.jsx)("li",{children:(0,S.jsx)("button",{className:be,onClick:()=>{m=!m,Ie(i,m,"delete"),(async(e,t,s)=>{await L({idPro:t,idEst:e,idPos:s}),D(r.qx.util.resetApiState()),(0,p.Am)("\u041f\u043e\u0437\u0438\u0446\u0456\u044e \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e")})(e._id,_._id,a)},children:"\u0422\u0430\u043a"})}),(0,S.jsx)("li",{children:(0,S.jsx)("button",{className:ge,onClick:()=>{m=!m,Ie(i,m,"delete")},children:"\u041d\u0456"})})]})]})]})]},i)})),(0,S.jsxs)("tr",{className:"title-row",children:[(0,S.jsx)("td",{colSpan:"5",children:"\u0412\u0441\u044c\u043e\u0433\u043e:"}),(0,S.jsx)("td",{className:ie,children:e.total})]})]})})]},e._id)))]}),(0,S.jsxs)("div",{className:ae,children:[(0,S.jsx)("p",{children:"\u0417\u0430\u0433\u0430\u043b\u044c\u043d\u0430 \u0441\u0443\u043c\u0430: "}),_&&(0,S.jsx)("p",{children:_.total})]}),(0,S.jsxs)("div",{className:ae,children:[(0,S.jsx)("p",{children:"\u0412\u0438\u0442\u0440\u0430\u0447\u0435\u043d\u043e \u043d\u0430 \u043c\u0430\u0442\u0435\u0440\u0456\u0430\u043b\u0438:"}),(null===_||void 0===_?void 0:_.materialsTotal)&&(0,S.jsx)("p",{children:null===_||void 0===_?void 0:_.materialsTotal})]}),(0,S.jsxs)("div",{className:ae,children:[(0,S.jsx)("p",{children:"\u0410\u0432\u0430\u043d\u0441:            "}),(null===_||void 0===_?void 0:_.advancesTotal)&&(0,S.jsx)("p",{children:null===_||void 0===_?void 0:_.advancesTotal})]}),(0,S.jsxs)("div",{div:!0,className:ae,children:[(0,S.jsx)("p",{children:"\u0414\u043e \u043e\u043f\u043b\u0430\u0442\u0438:"}),(null===_||void 0===_?void 0:_.general)&&(0,S.jsx)("p",{children:null===_||void 0===_?void 0:_.general})]}),f&&(0,S.jsx)(fe.Z,{children:(0,S.jsx)(A,{isShowModal:Q,add:async e=>{const t={idEst:T.idEst,idPos:T.idPos,position:e};await F(t),D(r.qx.util.resetApiState()),(0,p.Am)("\u041f\u043e\u0437\u0438\u0446\u0456\u044e \u0434\u043e\u0434\u0430\u043d\u043e")}})}),I&&(0,S.jsx)(fe.Z,{children:(0,S.jsx)(H,{isShowModal:Ce,idData:k})}),P&&(0,S.jsx)(fe.Z,{children:(0,S.jsx)(U,{idData:e,isShowModal:Pe})})]})})};const Ce=function(){const{id:e}=(0,a.UO)(),{data:t}=(0,r.ai)(e),[s,l]=(0,i.useState)(t);return(0,i.useEffect)((()=>{l(t)}),[t]),c().vfs=o.I.vfs,(0,S.jsx)(S.Fragment,{children:void 0===t?(0,S.jsx)(V,{}):(0,S.jsxs)("div",{children:[(0,S.jsxs)("ul",{className:xe,children:[(0,S.jsx)("li",{className:ve,children:"\u041a\u043e\u0448\u0442\u043e\u0440\u0438\u0441"}),(0,S.jsx)("li",{className:je,children:(0,S.jsx)(n.OL,{className:pe,to:"/materials/".concat(null===s||void 0===s?void 0:s._id),children:"\u041c\u0430\u0442\u0435\u0440\u0456\u0430\u043b\u0438"})}),(0,S.jsx)("li",{className:je,children:(0,S.jsx)(n.OL,{className:pe,to:"/advances/".concat(null===s||void 0===s?void 0:s._id),children:"\u0410\u0432\u0430\u043d\u0441"})})]}),(0,S.jsx)("button",{className:oe,onClick:()=>{if(s){const e=[{text:"\u041d\u0430\u0437\u0432\u0430 \u043e\u0431'\u0454\u043a\u0442\u0443:          ".concat(null===s||void 0===s?void 0:s.title),fontSize:25},{text:"\u0410\u0434\u0440\u0435\u0441\u0430:                                                 ".concat(null===s||void 0===s?void 0:s.description),fontSize:14,marginTop:10}];s.estimates.forEach((t=>{var s;e.push({text:null===t||void 0===t?void 0:t.title,fontSize:16,bold:!0,marginTop:30,marginBottom:10,marginLeft:200},{table:{headerRows:1,widths:["auto","auto","auto","auto","auto","auto"],body:[["\u2116 \u0437/\u043f.","\u041d\u0430\u0437\u0432\u0430","\u041e\u0434\u0438\u043d\u0438\u0446\u044f","\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c","\u0426\u0456\u043d\u0430 \u0432 \u0433\u0440\u043d.","\u0421\u0443\u043c\u0430 \u0432 \u0433\u0440\u043d."],...(null===t||void 0===t||null===(s=t.positions)||void 0===s?void 0:s.map(((e,t)=>{let{title:s,unit:i,price:a,number:n,result:l}=e;return[t+1,s||"",i||"",n||"",a||"",l||""]})))||[],[{},{},{},{},"\u0412\u0441\u044c\u043e\u0433\u043e:",null===t||void 0===t?void 0:t.total]]},layout:"lightHorizontalLines",style:"tableExample"})})),e.push({text:"\u0417\u0430\u0433\u0430\u043b\u044c\u043d\u0430 \u0441\u0443\u043c\u0430:                            ".concat(null===s||void 0===s?void 0:s.total),fontSize:30,marginTop:30}),e.push({text:"\u0412\u0438\u0442\u0440\u0430\u0447\u0435\u043d\u043e \u043d\u0430 \u043c\u0430\u0442\u0435\u0440\u0456\u0430\u043b\u0438:          ".concat(null===s||void 0===s?void 0:s.materialsTotal),fontSize:30,marginTop:30}),e.push({text:"\u0410\u0432\u0430\u043d\u0441:                                             ".concat(null===s||void 0===s?void 0:s.advancesTotal),fontSize:30,marginTop:30}),e.push({text:"\u0414\u043e \u043e\u043f\u043b\u0430\u0442\u0438:                                    ".concat(null===s||void 0===s?void 0:s.general),fontSize:30,marginTop:30});const t={content:e,styles:{tableExample:{margin:[0,5,0,15],fontSize:12,color:"#333"}}};c().createPdf(t).download("".concat(null===s||void 0===s?void 0:s.title,".pdf"))}},children:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 PDF \u0444\u0430\u0439\u043b"}),s&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:ne,children:(0,S.jsxs)("p",{className:G,children:["\u041d\u0430\u0437\u0432\u0430 \u043e\u0431'\u0454\u043a\u0442\u0443: ",s.title]})}),s.description&&(0,S.jsxs)("p",{className:J,children:["\u0410\u0434\u0440\u0435\u0441\u0430: ",s.description]}),s.estimates&&s.estimates.map((e=>(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{className:ne,children:(0,S.jsx)("p",{className:K,children:e.title})}),(0,S.jsx)("table",{className:Y,children:(0,S.jsxs)("tbody",{children:[(0,S.jsxs)("tr",{className:W,children:[(0,S.jsx)("td",{className:$,children:"\u2116 \u0437/\u043f."}),(0,S.jsx)("td",{className:ee,children:"\u041d\u0430\u0437\u0432\u0430"}),(0,S.jsx)("td",{className:te,children:"\u041e\u0434\u0438\u043d\u0438\u0446\u044f"}),(0,S.jsx)("td",{className:te,children:"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"}),(0,S.jsx)("td",{className:te,children:"\u0426\u0456\u043d\u0430 \u0432 \u0433\u0440\u043d."}),(0,S.jsx)("td",{className:ie,children:"\u0421\u0443\u043c\u0430 \u0432 \u0433\u0440\u043d."})]}),e.positions&&e.positions.map(((e,t)=>{let{_id:s,id:i,title:a,unit:n,price:l,number:d,result:c}=e;return(0,S.jsxs)("tr",{className:X,children:[(0,S.jsx)("td",{className:$,children:t+1}),(0,S.jsx)("td",{children:(0,S.jsx)("p",{children:a})}),(0,S.jsx)("td",{className:te,children:(0,S.jsx)("p",{children:n})}),(0,S.jsx)("td",{className:te,children:(0,S.jsx)("p",{children:d})}),(0,S.jsx)("td",{className:te,children:(0,S.jsx)("p",{children:l})}),(0,S.jsx)("td",{className:ie,children:(0,S.jsx)("p",{children:c})})]},s)})),(0,S.jsxs)("tr",{className:"title-row",children:[(0,S.jsx)("td",{colSpan:"5",children:"\u0412\u0441\u044c\u043e\u0433\u043e:"}),(0,S.jsx)("td",{className:ie,children:e.total})]})]})})]},e._id)))]}),(0,S.jsxs)("div",{className:ae,children:[(0,S.jsx)("p",{children:"\u0417\u0430\u0433\u0430\u043b\u044c\u043d\u0430 \u0441\u0443\u043c\u0430: "}),s&&(0,S.jsx)("p",{children:s.total})]}),(0,S.jsxs)("div",{className:ae,children:[(0,S.jsx)("p",{children:"\u0412\u0438\u0442\u0440\u0430\u0447\u0435\u043d\u043e \u043d\u0430 \u043c\u0430\u0442\u0435\u0440\u0456\u0430\u043b\u0438:"}),(null===s||void 0===s?void 0:s.materialsTotal)&&(0,S.jsx)("p",{children:null===s||void 0===s?void 0:s.materialsTotal})]}),(0,S.jsxs)("div",{className:ae,children:[(0,S.jsx)("p",{children:"\u0410\u0432\u0430\u043d\u0441:"}),(null===s||void 0===s?void 0:s.advancesTotal)&&(0,S.jsx)("p",{children:null===s||void 0===s?void 0:s.advancesTotal})]}),(0,S.jsxs)("div",{div:!0,className:ae,children:[(0,S.jsx)("p",{children:"\u0414\u043e \u043e\u043f\u043b\u0430\u0442\u0438:"}),(null===s||void 0===s?void 0:s.general)&&(0,S.jsx)("p",{children:null===s||void 0===s?void 0:s.general})]})]})})},Ie="Project_projectContainer__1NP4c",ye="Project_titleEst__bB-cB";const Te=function(){const{data:e}=(0,h.sA)(),[t,s]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{if(e){var t;const i=null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.role;s("customer"!==i)}}),[e,t]),(0,S.jsxs)("div",{className:Ie,children:[(0,S.jsx)("h1",{className:ye,children:"\u041a\u041e\u0428\u0422\u041e\u0420\u0418\u0421"}),t?(0,S.jsx)(Pe,{}):(0,S.jsx)(Ce,{})]})}}}]);
//# sourceMappingURL=Project.bf552963.chunk.js.map